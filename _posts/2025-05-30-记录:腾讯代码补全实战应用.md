---
layout: post
title:  "记录:腾讯代码补全实战"
permalink: /记录:腾讯代码补全实战.html
---

# 记录:腾讯CodeBuddy代码补全实战

> 参考:https://mp.weixin.qq.com/s/bpJn-WRh4M16pPEInxRnMQ

## 步骤:

* 在微信开发者工具中直接安装 CodeBuddy 插件

> [!NOTE]
>
> 路径:工具>插件>编辑器扩展

* 插件面板:

  ![位置信息](./2025-05-30-%E8%AE%B0%E5%BD%95:%E8%85%BE%E8%AE%AF%E4%BB%A3%E7%A0%81%E8%A1%A5%E5%85%A8%E5%AE%9E%E6%88%98%E5%BA%94%E7%94%A8.assets/image-20250530105145732.png)

* 生成模版提示词:

  ```typescript
  基于TS基础模板，生成一个微信小程序代码生成的提示词，该提示词用于生成微信小程序的跳一跳游戏，要附上跳一跳完整的游戏规则，包括基本规则、积分统计、失败情况等内 容，先不需要提供示例代码，只需要提供完整的提示词。 
  直接转成 markdown 格式。
  在提示词里增加「微信小程序的代码质量，和代码要求」。
  ```

![效果图](./2025-05-30-%E8%AE%B0%E5%BD%95:%E8%85%BE%E8%AE%AF%E4%BB%A3%E7%A0%81%E8%A1%A5%E5%85%A8%E5%AE%9E%E6%88%98%E5%BA%94%E7%94%A8.assets/image-20250530105740098.png)

* 尝试提示词威力:

  > [!NOTE]
  >
  > (不推荐)笔者尝试路径是:小程序>智能创造
  >
  > 原文作者路径是:小程序>模版>CodeBuddy >craft

  

```typescript
# 角色  
您是腾讯云代码助手，一位专业的微信小程序开发专家，精通 WXML、WXSS、TypeScript 的语法，熟悉微信小程序的项目架构、组件化设计与动画实现。  
您的任务是根据自然语言描述，与开发者合作，生成结构清晰、逻辑完整、可运行的微信小程序工程代码。您细致入微、推理能力强，输出的代码完整、规范、具有良好可维护性。

---

# 项目描述  
开发一个基于 TypeScript 的微信小程序小游戏，游戏名称为「跳一跳 Jump!」。  
玩家通过按压屏幕蓄力，松开后角色跳跃，目标是落在下一个平台上。  
跳跃距离与按压时间成正比，落点越准，得分越高；跳偏则失败，游戏结束。支持积分统计和失败重启功能。

---

# 功能需求  

## 游戏玩法  
- 主角为一个可跳跃的圆球或方块；
- 玩家按住屏幕，角色开始蓄力，松手后跳跃；
- 跳跃的距离由按压时间决定；
- 成功落在平台上可继续游戏；
- 落点越精准，可获得“完美着陆”加分（可选）；
- 落空即判定游戏失败，弹出得分提示。

## 游戏规则  
- 游戏从中央平台起跳，平台位置和宽度随机生成；
- 跳跃轨迹可为简化的线性位移或抛物线；
- 平台之间的间距和方向可为左右交替，也可支持斜对角方向；
- 每次成功落地记 1 分，完美着陆加额外分数（如+1）；
- 游戏失败条件包括：
  - 未落到平台上；
  - 小球跳出画布区域。

## 交互功能  
- 按住屏幕触发蓄力动画（例如角色压缩）；
- 松开后角色跳跃，进入飞行状态；
- 成功落地播放跳跃音效或轻微动画；
- 显示当前得分、历史最高分；
- 游戏结束后显示得分，提供重新开始按钮。

---

# 微信小程序代码质量与要求  

## 📌 开发语言与结构  
- 必须使用 TypeScript 编写；  
- 使用微信小程序原生组件（如 `canvas`、`view`）；  
- 使用 `Page` 注册页面逻辑；  
- 项目结构清晰，逻辑封装合理，组件职责分离。

## 🧠 可读性与注释  
- 所有函数、类、模块命名应语义明确，采用 camelCase 命名法；  
- 对关键逻辑（如跳跃、落点计算、平台生成等）添加详细注释；  
- 对每个模块或方法添加文档注释，便于他人理解与维护。

## 🔧 错误处理  
- 按压/跳跃事件需判断状态是否合法，避免多次触发；  
- 捕获非法跳跃状态（如重复跳跃、未落地时再次操作）；  
- 所有异常需提示用户，不可报错崩溃。

## 🔒 安全性与性能优化  
- 不在代码中硬编码任何隐私信息或接口；  
- 本地数据（如最高得分）需加密存储；  
- 所有渲染应使用 requestAnimationFrame 或 canvas batchDraw 优化性能；
- 避免冗余渲染与动画资源泄漏。

---

# 技术实现提示  

## TypeScript 项目结构  
- 使用 TypeScript 编写主逻辑，搭配 `canvas` 实现绘图与跳跃动画；
- 建议将跳跃计算、平台生成、碰撞检测分别封装成模块；
- 使用定时器或 requestAnimationFrame 实现跳跃动画过渡；
- 游戏状态需使用页面 `data` 或封装的 store 管理。

## 跳跃逻辑  
- 按住时间记录 `pressStart` 和 `pressEnd`；
- 跳跃距离 `distance = (pressEnd - pressStart) * factor`；
- 起跳点为当前平台中心，落点计算根据角度和距离推算；
- 落地后需检测是否命中下一平台范围，若未命中则失败。

## 平台生成与检测  
- 平台位置、宽度使用随机数生成；
- 新平台始终位于当前平台的右侧或左上/右上；
- 每次跳跃成功后生成下一个平台并更新渲染；
- 检测落点是否落入平台 bounding box。

---

# 推荐项目目录结构  

```plaintext
src/
├── pages/
│   ├── game/              # 游戏主页面
│   │   ├── game.ts
│   │   ├── game.wxml
│   │   ├── game.wxss
├── utils/
│   ├── physics.ts         # 跳跃计算、碰撞检测
│   ├── platform.ts        # 平台生成与管理
│   ├── renderer.ts        # canvas 绘图逻辑
├── types/
│   ├── index.d.ts         # 类型定义（如 Platform, Player 等）
├── app.ts
├── app.json
├── app.wxss
```

* 确认创建

* Craft模式输入报错信息,CodeBuddy进行代码补全

![失败](./2025-05-30-%E8%AE%B0%E5%BD%95:%E8%85%BE%E8%AE%AF%E4%BB%A3%E7%A0%81%E8%A1%A5%E5%85%A8%E5%AE%9E%E6%88%98%E5%BA%94%E7%94%A8.assets/image-20250530161523013.png)

* 确认失败

## 反思:

实际上,目前各大媒体博主鼓吹的AIGC工具距离变为普通人零门槛的生产力工具还是有很大距离,我相信这篇文章博主除了对prompt进行调整,而且对代码也进行了手工修复.除此之外,AIGC的temperature参数调整也可能导致不同的输出,这意味着有很大概率随机到错误的解决方案.

AIGC工具输出的代码还有个吐槽点–代码复用性极其糟糕,除了直接写入提示词中,否则就等着生成几千行代码的一个方法(实际上可以拆解成几个辅助方法和一个调用各个辅助方法的主要方法).代码颗粒度不够,这些都是软件工程中的问题.

所以,作为将来从事技术开发的coder,我认为目前的重心是放入软件工程中,用软件工程的专业术语去控制输出,来获取一个较为不错的结果.